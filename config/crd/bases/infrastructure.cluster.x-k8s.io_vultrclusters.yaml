---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.17.1
  name: vultrclusters.infrastructure.cluster.x-k8s.io
spec:
  group: infrastructure.cluster.x-k8s.io
  names:
    categories:
    - cluster-api
    kind: VultrCluster
    listKind: VultrClusterList
    plural: vultrclusters
    singular: vultrcluster
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: Cluster to which this VultrCluster belongs
      jsonPath: .metadata.labels.cluster\.x-k8s\.io/cluster-name
      name: Cluster
      type: string
    - description: Cluster infrastructure availability
      jsonPath: .status.conditions[?(@.type=="Available")].status
      name: Available
      type: string
    - description: API Endpoint
      jsonPath: .spec.controlPlaneEndpoint
      name: Endpoint
      priority: 1
      type: string
    name: v1beta2
    schema:
      openAPIV3Schema:
        description: VultrCluster is the Schema for the vultrclusters API.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: VultrClusterSpec defines the desired state of VultrCluster.
            properties:
              controlPlaneEndpoint:
                description: ControlPlaneEndpoint represents the endpoint used to
                  communicate with the control plane.
                minProperties: 1
                properties:
                  host:
                    description: host is the hostname on which the API server is serving.
                    maxLength: 512
                    minLength: 1
                    type: string
                  port:
                    description: port is the port on which the API server is serving.
                    format: int32
                    maximum: 65535
                    minimum: 1
                    type: integer
                type: object
              network:
                description: NetworkSpec encapsulates all things related to Vultr
                  network.
                properties:
                  apiServerLoadbalancers:
                    description: Configures an API Server loadbalancers
                    properties:
                      date_created:
                        type: string
                      firewall_rules:
                        items:
                          description: LBFirewallRule represents a single firewall
                            rule
                          properties:
                            id:
                              type: string
                            ip_type:
                              type: string
                            port:
                              type: integer
                            source:
                              type: string
                          type: object
                        type: array
                      forwarding_rules:
                        items:
                          description: ForwardingRule represent a single forwarding
                            rule
                          properties:
                            backend_port:
                              type: integer
                            backend_protocol:
                              type: string
                            frontend_port:
                              type: integer
                            frontend_protocol:
                              type: string
                            id:
                              type: string
                          type: object
                        type: array
                      generic_info:
                        description: GenericInfo represents generic configuration
                          of your load balancer
                        properties:
                          balancing_algorithm:
                            type: string
                          private_network:
                            type: string
                          proxy_protocol:
                            type: boolean
                          ssl_redirect:
                            type: boolean
                          sticky_sessions:
                            description: StickySessions represents cookie for your
                              load balancer
                            properties:
                              cookie_name:
                                type: string
                            type: object
                          vpc:
                            type: string
                        type: object
                      has_ssl:
                        type: boolean
                      health_check:
                        description: HealthCheck represents your health check configuration
                          for your load balancer.
                        properties:
                          check_interval:
                            type: integer
                          healthy_threshold:
                            type: integer
                          path:
                            type: string
                          port:
                            type: integer
                          protocol:
                            type: string
                          response_timeout:
                            type: integer
                          unhealthy_threshold:
                            type: integer
                        type: object
                      id:
                        type: string
                      instances:
                        items:
                          type: string
                        type: array
                      ipv4:
                        type: string
                      ipv6:
                        type: string
                      label:
                        type: string
                      nodes:
                        type: integer
                      region:
                        type: string
                      status:
                        type: string
                    type: object
                type: object
              region:
                description: The Vultr Region (DCID) the cluster lives on.
                type: string
            required:
            - region
            type: object
          status:
            description: VultrClusterStatus defines the observed state of VultrCluster
              (v1beta2 style).
            properties:
              conditions:
                description: Represents the observations of a Cluster's current state.
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                maxItems: 32
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              controlPlane:
                description: ControlPlane groups all the observations about Cluster's
                  ControlPlane current state.
                properties:
                  availableReplicas:
                    format: int32
                    type: integer
                  desiredReplicas:
                    format: int32
                    type: integer
                  readyReplicas:
                    format: int32
                    type: integer
                  replicas:
                    format: int32
                    type: integer
                  upToDateReplicas:
                    format: int32
                    type: integer
                type: object
              initialization:
                description: Initialization provides observations of the Cluster initialization
                  process.
                properties:
                  controlPlaneInitialized:
                    description: ControlPlaneInitialized denotes when the control
                      plane is functional enough to accept requests.
                    type: boolean
                  infrastructureProvisioned:
                    description: |-
                      InfrastructureProvisioned is true when the infrastructure provider reports
                      that Cluster's infrastructure is fully provisioned.
                    type: boolean
                type: object
              network:
                description: Network encapsulates all things related to the Vultr
                  network.
                properties:
                  apiServerLoadbalancersRef:
                    description: APIServerLoadbalancersRef is the id of apiserver
                      loadbalancers.
                    properties:
                      powerStatus:
                        description: Power Status of a Vultr resource
                        type: string
                      resourceId:
                        description: ID of Vultr resource
                        type: string
                      resourceStatus:
                        description: Status of a Vultr resource
                        type: string
                      serverState:
                        description: Server state of a Vultr resource
                        type: string
                    type: object
                type: object
              workers:
                description: Workers groups all the observations about Cluster's Workers
                  current state.
                properties:
                  availableReplicas:
                    format: int32
                    type: integer
                  desiredReplicas:
                    format: int32
                    type: integer
                  readyReplicas:
                    format: int32
                    type: integer
                  replicas:
                    format: int32
                    type: integer
                  upToDateReplicas:
                    format: int32
                    type: integer
                type: object
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
